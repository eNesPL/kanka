{"version":3,"file":"/js/location/map-v3.js","mappings":"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","sources":["webpack:///./resources/assets/js/components/delete-confirm.js","webpack:///./resources/assets/js/location/map-v3.js"],"sourcesContent":["export default function deleteConfirm() {\n    // Delete confirm dialog\n    $.each($('.delete-confirm'), function () {\n        $(this).click(function (e) {\n            let name = $(this).data('name');\n            let target = $(this).data('delete-target');\n            let targetModal = $(this).data('target');\n\n            $(targetModal).find('.target-name').text(name);\n\n            if ($(this).data('mirrored')) {\n                $('#delete-confirm-mirror').show();\n            } else {\n                $('#delete-confirm-mirror').hide();\n            }\n\n            if ($(this).data('recoverable')) {\n                $(targetModal).find('.permanent').hide();\n                $(targetModal).find('.recoverable').show();\n            } else {\n                $(targetModal).find('.recoverable').hide();\n                $(targetModal).find('.permanent').show();\n            }\n\n            if (target) {\n                $('.delete-confirm-submit').data('target', target);\n            }\n        });\n    });\n\n\n    // Submit modal form\n    $.each($('.delete-confirm-submit'), function (index) {\n        $(this).unbind('click');\n        $(this).click(function (e) {\n            var target = $(this).data('target');\n            //console.log('Submit delete confirmation', target);\n            if (target) {\n                $('#' + target + ' input[name=remove_mirrored]').val(\n                    $('#delete-confirm-mirror-checkbox').is(':checked') ? 1 : 0\n                );\n                //console.log('target', target, $('#' + target));\n                $('#' + target).submit();\n            } else {\n                $('#delete-confirm-form').submit();\n            }\n        })\n    });\n}\n","import deleteConfirm from \"../components/delete-confirm\";\n\n//require ('leaflet.markercluster/dist/leaflet.markercluster');\n//require ('leaflet.markercluster.layersupport');\n\nvar mapPageBody;\nvar sidebarMap, sidebarMarker;\nvar markerModal, markerModalContent, markerModalTitle;\n\n// Polygon layout style\nvar eraseTempPolygonBtn;\nvar polygonStrokeWeight, polygonStrokeColour, polygonStrokeOpacity, polygonColour, polygonOpacity;\n\n$(document).ready(function() {\n\n    window.map.invalidateSize();\n    //deleteConfirm();\n\n    window.map.on('popupopen', function (ev) {\n        deleteConfirm();\n    });\n\n    // Event fired when clicking on an existing map point\n\n    $('a[href=\"#marker-pin\"]').click(function (e) {\n        $('input[name=\"shape_id\"]').val(1);\n        $('#map-marker-bg-colour').show();\n        showMainFields();\n    });\n    $('a[href=\"#marker-label\"]').click(function (e) {\n        $('input[name=\"shape_id\"]').val(2);\n        $('#map-marker-bg-colour').hide();\n        showMainFields();\n    });\n    $('a[href=\"#marker-circle\"]').click(function (e) {\n        $('input[name=\"shape_id\"]').val(3);\n        $('#map-marker-bg-colour').show();\n        showMainFields();\n    });\n    $('a[href=\"#marker-poly\"]').click(function (e) {\n        $('input[name=\"shape_id\"]').val(5);\n        $('#map-marker-bg-colour').show();\n        showMainFields();\n    });\n    $('a[href=\"#presets\"]').click(function (e) {\n        loadPresets($(this).data('presets'));\n    });\n    $('a[href=\"#form-markers\"]').click(function (e) {\n        window.map.invalidateSize();\n    });\n\n    initMapExplore();\n    initMapForms();\n    initMapEntryClick();\n    initPolygonDrawing();\n    registerModes();\n});\n\n/**\n *\n */\nfunction initMapExplore()\n{\n    //console.log('initMapExplore', '');\n    mapPageBody = $('#map-body');\n    if (mapPageBody.length === 0) {\n        //console.log('initMapExplore', 'no explore mode');\n        return;\n    }\n    sidebarMap = $('#sidebar-map');\n    sidebarMarker = $('#sidebar-marker');\n    markerModal = $('#map-marker-modal');\n    markerModalTitle = $('#map-marker-modal-title');\n    markerModalContent = $('#map-marker-modal-content');\n\n    window.markerDetails = function(url) {\n        showSidebar();\n        if (window.kankaIsMobile.matches) {\n            url = url + '?mobile=1';\n        }\n        $.ajax({\n            url: url,\n            type: 'GET',\n            async: true,\n            success: function (result) {\n                if (result) {\n                    if (window.kankaIsMobile.matches) {\n                        markerModalTitle.html(result.name);\n                        markerModalContent.find('.content').html(result.body).show();\n                        markerModalContent.find('.spinner').hide();\n                    } else {\n                        sidebarMarker.html(result.body).show()\n                            .parent().find('.spinner').hide();\n\n                        handleCloseMarker();\n                        mapPageBody.addClass('sidebar-open');\n                    }\n                    deleteConfirm();\n                }\n            }\n        });\n    };\n\n    initLegend();\n}\n\n/**\n * When submitting the layer or marker form from the map modal, disable the map form unsaved changed\n * alert.\n */\nfunction initMapForms()\n{\n    $('select[name=\"size_id\"]').change(function (e) {\n        if (this.value == 6) {\n            $('.map-marker-circle-helper').hide();\n            $('.map-marker-circle-radius').show();\n        } else {\n            $('.map-marker-circle-radius').hide();\n            $('.map-marker-circle-helper').show();\n        }\n    });\n\n    //console.info('mapsv3', 'initMapForms');\n    let markerForm = $('#map-marker-form');\n    if ($('#entity-form').length === 0 && $('.map-marker-edit-form').length === 0) {\n        //console.info('initMapForms empty');\n        return;\n    }\n\n    markerForm.unbind('submit').on('submit', function() {\n        window.entityFormHasUnsavedChanges = false;\n    });\n\n\n    initLegend();\n}\n\nfunction showSidebar()\n{\n    // On mobile use the modal instead of the sidebar\n    if (window.kankaIsMobile.matches) {\n        markerModalContent.find('.spinner').show();\n        markerModalContent.find('.content').hide();\n        markerModal.modal('toggle');\n        return;\n    }\n\n    //window.map.invalidateSize();\n    mapPageBody.removeClass('sidebar-collapse').addClass('sidebar-open');\n    sidebarMap.hide();\n    sidebarMarker.html('').show();\n    sidebarMarker.parent().find('.spinner').show();\n    invalidateMapOnSidebar();\n}\n\nfunction handleCloseMarker()\n{\n    $('.marker-close').click(function (ev) {\n        sidebarMarker.hide();\n        sidebarMap.show();\n    });\n}\n\nfunction initLegend()\n{\n    $('.map-legend-marker').click(function (ev) {\n        ev.preventDefault();\n        window.map.panTo(L.latLng($(this).data('lat'), $(this).data('lng')));\n        window[$(this).data('id')].openPopup();\n    });\n\n    $('a.sidebar-toggle').click(function () {\n        invalidateMapOnSidebar();\n    });\n}\nfunction invalidateMapOnSidebar() {\n    setTimeout(() => {\n        // Invalidate the map size when the sidebar is rendered/hidden\n        window.map.invalidateSize();\n    }, 500);\n}\nfunction initMapEntryClick() {\n    $('.map-marker-entry-click').click(function (e) {\n        e.preventDefault();\n        $(this).parent().hide();\n        $('.map-marker-entry-entry').show();\n    });\n}\n\n/**\n * Register switching in and out of edit mode\n */\nfunction registerModes() {\n    $('.btn-mode-enable').click(function (e) {\n        e.preventDefault();\n        window.exploreEditMode = true;\n        $('body').addClass('map-edit-mode');\n    });\n    $('.btn-mode-disable').click(function (e) {\n        e.preventDefault();\n        window.exploreEditMode = false;\n        $('body').removeClass('map-edit-mode');\n    });\n    $('.btn-mode-drawing').click(function (e) {\n        e.preventDefault();\n        window.drawingPolygon = false;\n        $('body').removeClass('map-drawing-mode');\n        $('#marker-modal').modal('show');\n    });\n\n\n}\n\nfunction initPolygonDrawing() {\n\n    $('#start-drawing-polygon').on('click', function (e) {\n        e.preventDefault();\n        window.drawingPolygon = true;\n        window.showToast($(this).data('toast'));\n        $('body').addClass('map-drawing-mode');\n        $('#marker-modal').modal('hide');\n    });\n\n    eraseTempPolygonBtn = $('#reset-polygon');\n    eraseTempPolygonBtn.click(function (e) {\n        e.preventDefault();\n        if (window.polygon) {\n            window.map.removeLayer(window.polygon);\n        }\n        $('textarea[name=\"custom_shape\"]').val('');\n        eraseTempPolygonBtn.hide();\n    });\n}\n\nwindow.addPolygonPosition = function(lat, lng) {\n    let shape = $('textarea[name=\"custom_shape\"]');\n    let current = shape.val();\n    if (current.length > 0) {\n        current += ' ';\n    }\n    shape.val(current + lat + ',' + lng);\n\n    // Redraw the polygon\n    let coords = shape.val();\n    let blocks = coords.trim(\" \").split(\" \");\n    let coordsData = [];\n\n    blocks.forEach((block) => {\n        let segments = block.split(',');\n        coordsData.push([segments[0], segments[1]]);\n    }, coordsData);\n\n    // Remove previous polygon if it was already drawn\n    if (window.polygon) {\n        window.map.removeLayer(window.polygon);\n    }\n\n    // Background colour as defined by the user if they are so far?\n    getPolygonStyle();\n\n    window.polygon = L.polygon(coordsData, {\n        weight: polygonStrokeWeight,\n        color: polygonStrokeColour,\n        opacity: polygonStrokeOpacity,\n        fillColor: polygonColour,\n        fillOpacity: polygonOpacity,\n        linecap: 'round',\n        linejoin: 'round',\n    });\n    window.polygon.addTo(window.map);\n    eraseTempPolygonBtn.show();\n}\n\nfunction getPolygonStyle() {\n    polygonStrokeColour = $('input[name=\"polygon_style[stroke]\"]').val();\n    if (!polygonStrokeColour || polygonStrokeColour.length < 7) {\n        polygonStrokeColour = 'red';\n    }\n\n    polygonStrokeOpacity = $('input[name=\"polygon_style[stroke-opacity]\"]').val();\n    if (isNaN(polygonStrokeOpacity) || !polygonStrokeOpacity) {\n        polygonStrokeOpacity = 1;\n    } else {\n        polygonStrokeOpacity = polygonStrokeOpacity / 100;\n    }\n\n    polygonColour = $('input[name=\"colour\"]').val();\n    if (!polygonColour || polygonColour.length < 7) {\n        polygonColour = 'red';\n    }\n\n    polygonOpacity = $('input[name=\"opacity\"]').val();\n    if (isNaN(polygonOpacity)) {\n        polygonOpacity = 0.5;\n    } else {\n        polygonOpacity = polygonOpacity / 100;\n    }\n\n    polygonStrokeWeight = $('input[name=\"polygon_style[stroke-width]\"]').val();\n    if (isNaN(polygonStrokeWeight) || !polygonStrokeWeight) {\n        polygonStrokeWeight = 1;\n    }\n}\n\nfunction showMainFields() {\n    $('#marker-main-fields').show();\n    $('#marker-footer').show();\n}\n\nfunction loadPresets(url) {\n    $('#marker-main-fields').hide();\n    $('#marker-footer').hide();\n\n    // If presets have already been loaded, skip loading/rendering of the list\n    if ($('.marker-preset-list .fa-spinner').length === 0) {\n        return;\n    }\n\n    console.log('load from', url);\n    $.ajax({\n        url: url\n    }).done(function (data) {\n        $('.marker-preset-list').html(data);\n        handlePresetClick();\n    });\n}\n\nfunction handlePresetClick() {\n    $('.preset-use').on('click', function (e) {\n        e.preventDefault();\n\n        let url = $(this).data('url');\n        $(this).find('.fa-spin').show();\n\n        $.ajax({\n            url: url,\n            context: this,\n        }).done(function (result) {\n            // Switch stuff around\n            $(this).find('.fa-spin').hide();\n\n            Object.keys(result.preset).forEach(key => {\n                let val = result.preset[key];\n\n                let field = $('[name=\"' + key + '\"]');\n                if (field.length === 0) {\n                    console.info('markerPreset', 'unknown field', key);\n                    return;\n                }\n                if (key.endsWith('colour')) {\n                    field.spectrum(\"set\", val);\n                } else {\n                    field.val(val);\n                }\n            });\n            $('a[href=\"#marker-pin\"]').click();\n        });\n    });\n}\n"],"names":["deleteConfirm","$","each","this","click","e","name","data","target","targetModal","find","text","show","hide","index","unbind","val","is","submit","mapPageBody","sidebarMap","sidebarMarker","markerModal","markerModalContent","markerModalTitle","eraseTempPolygonBtn","polygonStrokeWeight","polygonStrokeColour","polygonStrokeOpacity","polygonColour","polygonOpacity","initLegend","ev","preventDefault","window","map","panTo","L","latLng","openPopup","invalidateMapOnSidebar","setTimeout","invalidateSize","showMainFields","document","ready","on","url","length","console","log","ajax","done","html","context","result","Object","keys","preset","forEach","key","field","endsWith","spectrum","info","loadPresets","markerDetails","kankaIsMobile","matches","modal","removeClass","addClass","parent","showSidebar","type","async","success","body","initMapExplore","change","value","markerForm","entityFormHasUnsavedChanges","initMapForms","drawingPolygon","showToast","polygon","removeLayer","exploreEditMode","addPolygonPosition","lat","lng","shape","current","blocks","trim","split","coordsData","block","segments","push","isNaN","getPolygonStyle","weight","color","opacity","fillColor","fillOpacity","linecap","linejoin","addTo"],"sourceRoot":""}