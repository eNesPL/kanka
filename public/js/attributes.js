/*! For license information please see attributes.js.LICENSE.txt */
(()=>{var t={9351:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,l=t[Symbol.iterator]();!(i=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw r}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}if(Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(e=n[r],t.call(o,e,r,n))return e}),window&&"function"!=typeof window.CustomEvent){var o=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};void 0!==window.Event&&(o.prototype=window.Event.prototype),window.CustomEvent=o}var r=function(){function e(n){t(this,e),this.tribute=n,this.tribute.events=this}return n(e,[{key:"bind",value:function(t){t.boundKeydown=this.keydown.bind(t,this),t.boundKeyup=this.keyup.bind(t,this),t.boundInput=this.input.bind(t,this),t.addEventListener("keydown",t.boundKeydown,!1),t.addEventListener("keyup",t.boundKeyup,!1),t.addEventListener("input",t.boundInput,!1)}},{key:"unbind",value:function(t){t.removeEventListener("keydown",t.boundKeydown,!1),t.removeEventListener("keyup",t.boundKeyup,!1),t.removeEventListener("input",t.boundInput,!1),delete t.boundKeydown,delete t.boundKeyup,delete t.boundInput}},{key:"keydown",value:function(t,n){t.shouldDeactivate(n)&&(t.tribute.isActive=!1,t.tribute.hideMenu());var i=this;t.commandEvent=!1,e.keys().forEach((function(e){e.key===n.keyCode&&(t.commandEvent=!0,t.callbacks()[e.value.toLowerCase()](n,i))}))}},{key:"input",value:function(t,e){t.inputEvent=!0,t.keyup.call(this,t,e)}},{key:"click",value:function(t,e){var n=t.tribute;if(n.menu&&n.menu.contains(e.target)){var i=e.target;for(e.preventDefault(),e.stopPropagation();"li"!==i.nodeName.toLowerCase();)if(!(i=i.parentNode)||i===n.menu)throw new Error("cannot find the <li> container for the click");n.selectItemAtIndex(i.getAttribute("data-index"),e),n.hideMenu()}else n.current.element&&!n.current.externalTrigger&&(n.current.externalTrigger=!1,setTimeout((function(){return n.hideMenu()})))}},{key:"keyup",value:function(t,e){if(t.inputEvent&&(t.inputEvent=!1),t.updateSelection(this),27!==e.keyCode){if(!t.tribute.allowSpaces&&t.tribute.hasTrailingSpace)return t.tribute.hasTrailingSpace=!1,t.commandEvent=!0,void t.callbacks().space(e,this);if(!t.tribute.isActive)if(t.tribute.autocompleteMode)t.callbacks().triggerChar(e,this,"");else{var n=t.getKeyCode(t,this,e);if(isNaN(n)||!n)return;var i=t.tribute.triggers().find((function(t){return t.charCodeAt(0)===n}));void 0!==i&&t.callbacks().triggerChar(e,this,i)}t.tribute.current.mentionText.length<t.tribute.current.collection.menuShowMinLength||((t.tribute.current.trigger||t.tribute.autocompleteMode)&&!1===t.commandEvent||t.tribute.isActive&&8===e.keyCode)&&t.tribute.showMenuFor(this,!0)}}},{key:"shouldDeactivate",value:function(t){if(!this.tribute.isActive)return!1;if(0===this.tribute.current.mentionText.length){var n=!1;return e.keys().forEach((function(e){t.keyCode===e.key&&(n=!0)})),!n}return!1}},{key:"getKeyCode",value:function(t,e,n){var i=t.tribute,o=i.range.getTriggerInfo(!1,i.hasTrailingSpace,!0,i.allowSpaces,i.autocompleteMode);return!!o&&o.mentionTriggerChar.charCodeAt(0)}},{key:"updateSelection",value:function(t){this.tribute.current.element=t;var e=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);e&&(this.tribute.current.selectedPath=e.mentionSelectedPath,this.tribute.current.mentionText=e.mentionText,this.tribute.current.selectedOffset=e.mentionSelectedOffset)}},{key:"callbacks",value:function(){var t=this;return{triggerChar:function(e,n,i){var o=t.tribute;o.current.trigger=i;var r=o.collection.find((function(t){return t.trigger===i}));o.current.collection=r,o.current.mentionText.length>=o.current.collection.menuShowMinLength&&o.inputEvent&&o.showMenuFor(n,!0)},enter:function(e,n){t.tribute.isActive&&t.tribute.current.filteredItems&&(e.preventDefault(),e.stopPropagation(),setTimeout((function(){t.tribute.selectItemAtIndex(t.tribute.menuSelected,e),t.tribute.hideMenu()}),0))},escape:function(e,n){t.tribute.isActive&&(e.preventDefault(),e.stopPropagation(),t.tribute.isActive=!1,t.tribute.hideMenu())},tab:function(e,n){t.callbacks().enter(e,n)},space:function(e,n){t.tribute.isActive&&(t.tribute.spaceSelectsMatch?t.callbacks().enter(e,n):t.tribute.allowSpaces||(e.stopPropagation(),setTimeout((function(){t.tribute.hideMenu(),t.tribute.isActive=!1}),0)))},up:function(e,n){if(t.tribute.isActive&&t.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();var i=t.tribute.current.filteredItems.length,o=t.tribute.menuSelected;i>o&&o>0?(t.tribute.menuSelected--,t.setActiveLi()):0===o&&(t.tribute.menuSelected=i-1,t.setActiveLi(),t.tribute.menu.scrollTop=t.tribute.menu.scrollHeight)}},down:function(e,n){if(t.tribute.isActive&&t.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();var i=t.tribute.current.filteredItems.length-1,o=t.tribute.menuSelected;i>o?(t.tribute.menuSelected++,t.setActiveLi()):i===o&&(t.tribute.menuSelected=0,t.setActiveLi(),t.tribute.menu.scrollTop=0)}},delete:function(e,n){t.tribute.isActive&&t.tribute.current.mentionText.length<1?t.tribute.hideMenu():t.tribute.isActive&&t.tribute.showMenuFor(n)}}}},{key:"setActiveLi",value:function(t){var e=this.tribute.menu.querySelectorAll("li"),n=e.length>>>0;t&&(this.tribute.menuSelected=parseInt(t));for(var i=0;i<n;i++){var o=e[i];if(i===this.tribute.menuSelected){o.classList.add(this.tribute.current.collection.selectClass);var r=o.getBoundingClientRect(),a=this.tribute.menu.getBoundingClientRect();if(r.bottom>a.bottom){var l=r.bottom-a.bottom;this.tribute.menu.scrollTop+=l}else if(r.top<a.top){var s=a.top-r.top;this.tribute.menu.scrollTop-=s}}else o.classList.remove(this.tribute.current.collection.selectClass)}}},{key:"getFullHeight",value:function(t,e){var n=t.getBoundingClientRect().height;if(e){var i=t.currentStyle||window.getComputedStyle(t);return n+parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return n}}],[{key:"keys",value:function(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}}]),e}(),a=function(){function e(n){t(this,e),this.tribute=n,this.tribute.menuEvents=this,this.menu=this.tribute.menu}return n(e,[{key:"bind",value:function(t){var e=this;this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce((function(){e.tribute.isActive&&e.tribute.showMenuFor(e.tribute.current.element,!1)}),300,!1),this.windowResizeEvent=this.debounce((function(){e.tribute.isActive&&e.tribute.range.positionMenuAtCaret(!0)}),300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}},{key:"unbind",value:function(t){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}},{key:"debounce",value:function(t,e,n){var i,o=arguments,r=this;return function(){var a=r,l=o,s=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||t.apply(a,l)}),e),s&&t.apply(a,l)}}}]),e}(),l=function(){function e(n){t(this,e),this.tribute=n,this.tribute.range=this}return n(e,[{key:"getDocument",value:function(){var t;return this.tribute.current.collection&&(t=this.tribute.current.collection.iframe),t?t.contentWindow.document:document}},{key:"positionMenuAtCaret",value:function(t){var e,n=this,i=this.tribute.current,o=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==o){if(!this.tribute.positionMenu)return void(this.tribute.menu.style.cssText="display: block;");e=this.isContentEditable(i.element)?this.getContentEditableCaretPosition(o.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,o.mentionPosition),this.tribute.menu.style.cssText="top: ".concat(e.top,"px;\n                                     left: ").concat(e.left,"px;\n                                     right: ").concat(e.right,"px;\n                                     bottom: ").concat(e.bottom,"px;\n                                     position: absolute;\n                                     display: block;"),"auto"===e.left&&(this.tribute.menu.style.left="auto"),"auto"===e.top&&(this.tribute.menu.style.top="auto"),t&&this.scrollIntoView(),window.setTimeout((function(){var i={width:n.tribute.menu.offsetWidth,height:n.tribute.menu.offsetHeight},o=n.isMenuOffScreen(e,i),r=window.innerWidth>i.width&&(o.left||o.right),a=window.innerHeight>i.height&&(o.top||o.bottom);(r||a)&&(n.tribute.menu.style.cssText="display: none",n.positionMenuAtCaret(t))}),0)}else this.tribute.menu.style.cssText="display: none"}},{key:"selectElement",value:function(t,e,n){var i,o=t;if(e)for(var r=0;r<e.length;r++){if(void 0===(o=o.childNodes[e[r]]))return;for(;o.length<n;)n-=o.length,o=o.nextSibling;0!==o.childNodes.length||o.length||(o=o.previousSibling)}var a=this.getWindowSelection();(i=this.getDocument().createRange()).setStart(o,n),i.setEnd(o,n),i.collapse(!0);try{a.removeAllRanges()}catch(t){}a.addRange(i),t.focus()}},{key:"replaceTriggerText",value:function(t,e,n,i,o){var r=this.getTriggerInfo(!0,n,e,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==r){var a=this.tribute.current,l=new CustomEvent("tribute-replaced",{detail:{item:o,instance:a,context:r,event:i}});if(this.isContentEditable(a.element)){t+="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";var s=r.mentionPosition+r.mentionText.length;this.tribute.autocompleteMode||(s+=r.mentionTriggerChar.length),this.pasteHtml(t,r.mentionPosition,s)}else{var u=this.tribute.current.element,c="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";t+=c;var d=r.mentionPosition,h=r.mentionPosition+r.mentionText.length+c.length;this.tribute.autocompleteMode||(h+=r.mentionTriggerChar.length-1),u.value=u.value.substring(0,d)+t+u.value.substring(h,u.value.length),u.selectionStart=d+t.length,u.selectionEnd=d+t.length}a.element.dispatchEvent(new CustomEvent("input",{bubbles:!0})),a.element.dispatchEvent(l)}}},{key:"pasteHtml",value:function(t,e,n){var i,o;o=this.getWindowSelection(),(i=this.getDocument().createRange()).setStart(o.anchorNode,e),i.setEnd(o.anchorNode,n),i.deleteContents();var r=this.getDocument().createElement("div");r.innerHTML=t;for(var a,l,s=this.getDocument().createDocumentFragment();a=r.firstChild;)l=s.appendChild(a);i.insertNode(s),l&&((i=i.cloneRange()).setStartAfter(l),i.collapse(!0),o.removeAllRanges(),o.addRange(i))}},{key:"getWindowSelection",value:function(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}},{key:"getNodePositionInParent",value:function(t){if(null===t.parentNode)return 0;for(var e=0;e<t.parentNode.childNodes.length;e++)if(t.parentNode.childNodes[e]===t)return e}},{key:"getContentEditableSelectedPath",value:function(t){var e=this.getWindowSelection(),n=e.anchorNode,i=[];if(null!=n){for(var o,r=n.contentEditable;null!==n&&"true"!==r;)o=this.getNodePositionInParent(n),i.push(o),null!==(n=n.parentNode)&&(r=n.contentEditable);return i.reverse(),{selected:n,path:i,offset:e.getRangeAt(0).startOffset}}}},{key:"getTextPrecedingCurrentSelection",value:function(){var t=this.tribute.current,e="";if(this.isContentEditable(t.element)){var n=this.getWindowSelection().anchorNode;if(null!=n){var i=n.textContent,o=this.getWindowSelection().getRangeAt(0).startOffset;i&&o>=0&&(e=i.substring(0,o))}}else{var r=this.tribute.current.element;if(r){var a=r.selectionStart;r.value&&a>=0&&(e=r.value.substring(0,a))}}return e}},{key:"getLastWordInText",value:function(t){var e=(t=t.replace(/\u00A0/g," ")).split(/\s+/);return e[e.length-1].trim()}},{key:"getTriggerInfo",value:function(t,e,n,i,o){var r,a,l,s=this,u=this.tribute.current;if(this.isContentEditable(u.element)){var c=this.getContentEditableSelectedPath(u);c&&(r=c.selected,a=c.path,l=c.offset)}else r=this.tribute.current.element;var d=this.getTextPrecedingCurrentSelection(),h=this.getLastWordInText(d);if(o)return{mentionPosition:d.length-h.length,mentionText:h,mentionSelectedElement:r,mentionSelectedPath:a,mentionSelectedOffset:l};if(null!=d){var f,p=-1;if(this.tribute.collection.forEach((function(t){var e=t.trigger,i=t.requireLeadingSpace?s.lastIndexWithLeadingSpace(d,e):d.lastIndexOf(e);i>p&&(p=i,f=e,n=t.requireLeadingSpace)})),p>=0&&(0===p||!n||/[\xA0\s]/g.test(d.substring(p-1,p)))){var v=d.substring(p+f.length,d.length);f=d.substring(p,p+f.length);var g=v.substring(0,1),m=v.length>0&&(" "===g||" "===g);e&&(v=v.trim());var b=i?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=b.test(v),!m&&(t||!b.test(v)))return{mentionPosition:p,mentionText:v,mentionSelectedElement:r,mentionSelectedPath:a,mentionSelectedOffset:l,mentionTriggerChar:f}}}}},{key:"lastIndexWithLeadingSpace",value:function(t,e){for(var n=t.split("").reverse().join(""),i=-1,o=0,r=t.length;o<r;o++){for(var a=o===t.length-1,l=/\s/.test(n[o+1]),s=!0,u=e.length-1;u>=0;u--)if(e[u]!==n[o-u]){s=!1;break}if(s&&(a||l)){i=t.length-1-o;break}}return i}},{key:"isContentEditable",value:function(t){return"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName}},{key:"isMenuOffScreen",value:function(t,e){var n=window.innerWidth,i=window.innerHeight,o=document.documentElement,r=(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0),a=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),l="number"==typeof t.top?t.top:a+i-t.bottom-e.height,s="number"==typeof t.right?t.right:t.left+e.width,u="number"==typeof t.bottom?t.bottom:t.top+e.height,c="number"==typeof t.left?t.left:r+n-t.right-e.width;return{top:l<Math.floor(a),right:s>Math.ceil(r+n),bottom:u>Math.ceil(a+i),left:c<Math.floor(r)}}},{key:"getMenuDimensions",value:function(){var t={width:null,height:null};return this.tribute.menu.style.cssText="top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;",t.width=this.tribute.menu.offsetWidth,t.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",t}},{key:"getTextAreaOrInputUnderlinePosition",value:function(t,e,n){var i=null!==window.mozInnerScreenX,o=this.getDocument().createElement("div");o.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(o);var r=o.style,a=window.getComputedStyle?getComputedStyle(t):t.currentStyle;r.whiteSpace="pre-wrap","INPUT"!==t.nodeName&&(r.wordWrap="break-word"),r.position="absolute",r.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach((function(t){r[t]=a[t]})),i?(r.width="".concat(parseInt(a.width)-2,"px"),t.scrollHeight>parseInt(a.height)&&(r.overflowY="scroll")):r.overflow="hidden",o.textContent=t.value.substring(0,e),"INPUT"===t.nodeName&&(o.textContent=o.textContent.replace(/\s/g," "));var l=this.getDocument().createElement("span");l.textContent=t.value.substring(e)||".",o.appendChild(l);var s=t.getBoundingClientRect(),u=document.documentElement,c=(window.pageXOffset||u.scrollLeft)-(u.clientLeft||0),d=(window.pageYOffset||u.scrollTop)-(u.clientTop||0),h=0,f=0;this.menuContainerIsBody&&(h=s.top,f=s.left);var p={top:h+d+l.offsetTop+parseInt(a.borderTopWidth)+parseInt(a.fontSize)-t.scrollTop,left:f+c+l.offsetLeft+parseInt(a.borderLeftWidth)},v=window.innerWidth,g=window.innerHeight,m=this.getMenuDimensions(),b=this.isMenuOffScreen(p,m);b.right&&(p.right=v-p.left,p.left="auto");var y=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(b.bottom){var w=y-(g-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);p.bottom=w+(g-s.top-l.offsetTop),p.top="auto"}return(b=this.isMenuOffScreen(p,m)).left&&(p.left=v>m.width?c+v-m.width:c,delete p.right),b.top&&(p.top=g>m.height?d+g-m.height:d,delete p.bottom),this.getDocument().body.removeChild(o),p}},{key:"getContentEditableCaretPosition",value:function(t){var e,n=this.getWindowSelection();(e=this.getDocument().createRange()).setStart(n.anchorNode,t),e.setEnd(n.anchorNode,t),e.collapse(!1);var i=e.getBoundingClientRect(),o=document.documentElement,r=(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0),a=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),l={left:i.left+r,top:i.top+i.height+a},s=window.innerWidth,u=window.innerHeight,c=this.getMenuDimensions(),d=this.isMenuOffScreen(l,c);d.right&&(l.left="auto",l.right=s-i.left-r);var h=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(d.bottom){var f=h-(u-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);l.top="auto",l.bottom=f+(u-i.top)}return(d=this.isMenuOffScreen(l,c)).left&&(l.left=s>c.width?r+s-c.width:r,delete l.right),d.top&&(l.top=u>c.height?a+u-c.height:a,delete l.bottom),this.menuContainerIsBody||(l.left=l.left?l.left-this.tribute.menuContainer.offsetLeft:l.left,l.top=l.top?l.top-this.tribute.menuContainer.offsetTop:l.top),l}},{key:"scrollIntoView",value:function(t){var e,n=this.menu;if(void 0!==n){for(;void 0===e||0===e.height;)if(0===(e=n.getBoundingClientRect()).height&&(void 0===(n=n.childNodes[0])||!n.getBoundingClientRect))return;var i=e.top,o=i+e.height;if(i<0)window.scrollTo(0,window.pageYOffset+e.top-20);else if(o>window.innerHeight){var r=window.pageYOffset+e.top-20;r-window.pageYOffset>100&&(r=window.pageYOffset+100);var a=window.pageYOffset-(window.innerHeight-o);a>r&&(a=r),window.scrollTo(0,a)}}}},{key:"menuContainerIsBody",get:function(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}}]),e}(),s=function(){function e(n){t(this,e),this.tribute=n,this.tribute.search=this}return n(e,[{key:"simpleFilter",value:function(t,e){var n=this;return e.filter((function(e){return n.test(t,e)}))}},{key:"test",value:function(t,e){return null!==this.match(t,e)}},{key:"match",value:function(t,e,n){n=n||{},e.length;var i=n.pre||"",o=n.post||"",r=n.caseSensitive&&e||e.toLowerCase();if(n.skip)return{rendered:e,score:0};t=n.caseSensitive&&t||t.toLowerCase();var a=this.traverse(r,t,0,0,[]);return a?{rendered:this.render(e,a.cache,i,o),score:a.score}:null}},{key:"traverse",value:function(t,e,n,i,o){if(e.length===i)return{score:this.calculateScore(o),cache:o.slice()};if(!(t.length===n||e.length-i>t.length-n)){for(var r,a,l=e[i],s=t.indexOf(l,n);s>-1;){if(o.push(s),a=this.traverse(t,e,s+1,i+1,o),o.pop(),!a)return r;(!r||r.score<a.score)&&(r=a),s=t.indexOf(l,s+1)}return r}}},{key:"calculateScore",value:function(t){var e=0,n=1;return t.forEach((function(i,o){o>0&&(t[o-1]+1===i?n+=n+1:n=1),e+=n})),e}},{key:"render",value:function(t,e,n,i){var o=t.substring(0,e[0]);return e.forEach((function(r,a){o+=n+t[r]+i+t.substring(r+1,e[a+1]?e[a+1]:t.length)})),o}},{key:"filter",value:function(t,e,n){var i=this;return n=n||{},e.reduce((function(e,o,r,a){var l=o;n.extract&&((l=n.extract(o))||(l=""));var s=i.match(t,l,n);return null!=s&&(e[e.length]={string:s.rendered,score:s.score,index:r,original:o}),e}),[]).sort((function(t,e){return e.score-t.score||t.index-e.index}))}}]),e}();return function(){function e(n){var i,o=this,u=n.values,c=void 0===u?null:u,d=n.iframe,h=void 0===d?null:d,f=n.selectClass,p=void 0===f?"highlight":f,v=n.containerClass,g=void 0===v?"tribute-container":v,m=n.itemClass,b=void 0===m?"":m,y=n.trigger,w=void 0===y?"@":y,T=n.autocompleteMode,E=void 0!==T&&T,S=n.selectTemplate,C=void 0===S?null:S,k=n.menuItemTemplate,x=void 0===k?null:k,D=n.lookup,M=void 0===D?"key":D,A=n.fillAttr,_=void 0===A?"value":A,I=n.collection,O=void 0===I?null:I,N=n.menuContainer,P=void 0===N?null:N,L=n.noMatchTemplate,R=void 0===L?null:L,$=n.requireLeadingSpace,Y=void 0===$||$,X=n.allowSpaces,B=void 0!==X&&X,H=n.replaceTextSuffix,W=void 0===H?null:H,F=n.positionMenu,j=void 0===F||F,z=n.spaceSelectsMatch,q=void 0!==z&&z,U=n.searchOpts,K=void 0===U?{}:U,G=n.menuItemLimit,V=void 0===G?null:G,Q=n.menuShowMinLength,Z=void 0===Q?0:Q;if(t(this,e),this.autocompleteMode=E,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=P,this.allowSpaces=B,this.replaceTextSuffix=W,this.positionMenu=j,this.hasTrailingSpace=!1,this.spaceSelectsMatch=q,this.autocompleteMode&&(w="",B=!1),c)this.collection=[{trigger:w,iframe:h,selectClass:p,containerClass:g,itemClass:b,selectTemplate:(C||e.defaultSelectTemplate).bind(this),menuItemTemplate:(x||e.defaultMenuItemTemplate).bind(this),noMatchTemplate:(i=R,"string"==typeof i?""===i.trim()?null:i:"function"==typeof i?i.bind(o):R||function(){return"<li>No Match Found!</li>"}.bind(o)),lookup:M,fillAttr:_,values:c,requireLeadingSpace:Y,searchOpts:K,menuItemLimit:V,menuShowMinLength:Z}];else{if(!O)throw new Error("[Tribute] No collection specified.");this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=O.map((function(t){return{trigger:t.trigger||w,iframe:t.iframe||h,selectClass:t.selectClass||p,containerClass:t.containerClass||g,itemClass:t.itemClass||b,selectTemplate:(t.selectTemplate||e.defaultSelectTemplate).bind(o),menuItemTemplate:(t.menuItemTemplate||e.defaultMenuItemTemplate).bind(o),noMatchTemplate:function(t){return"string"==typeof t?""===t.trim()?null:t:"function"==typeof t?t.bind(o):R||function(){return"<li>No Match Found!</li>"}.bind(o)}(R),lookup:t.lookup||M,fillAttr:t.fillAttr||_,values:t.values,requireLeadingSpace:t.requireLeadingSpace,searchOpts:t.searchOpts||K,menuItemLimit:t.menuItemLimit||V,menuShowMinLength:t.menuShowMinLength||Z}}))}new l(this),new r(this),new a(this),new s(this)}return n(e,[{key:"triggers",value:function(){return this.collection.map((function(t){return t.trigger}))}},{key:"attach",value:function(t){if(!t)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t.get()),t.constructor===NodeList||t.constructor===HTMLCollection||t.constructor===Array)for(var e=t.length,n=0;n<e;++n)this._attach(t[n]);else this._attach(t)}},{key:"_attach",value:function(t){t.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+t.nodeName),this.ensureEditable(t),this.events.bind(t),t.setAttribute("data-tribute",!0)}},{key:"ensureEditable",value:function(t){if(-1===e.inputTypes().indexOf(t.nodeName)){if(!t.contentEditable)throw new Error("[Tribute] Cannot bind to "+t.nodeName);t.contentEditable=!0}}},{key:"createMenu",value:function(t){var e=this.range.getDocument().createElement("div"),n=this.range.getDocument().createElement("ul");return e.className=t,e.appendChild(n),this.menuContainer?this.menuContainer.appendChild(e):this.range.getDocument().body.appendChild(e)}},{key:"showMenuFor",value:function(t,e){var n=this;if(!this.isActive||this.current.element!==t||this.current.mentionText!==this.currentMentionTextSnapshot){this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),t.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");var o=function(t){if(n.isActive){var o=n.search.filter(n.current.mentionText,t,{pre:n.current.collection.searchOpts.pre||"<span>",post:n.current.collection.searchOpts.post||"</span>",skip:n.current.collection.searchOpts.skip,extract:function(t){if("string"==typeof n.current.collection.lookup)return t[n.current.collection.lookup];if("function"==typeof n.current.collection.lookup)return n.current.collection.lookup(t,n.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});n.current.collection.menuItemLimit&&(o=o.slice(0,n.current.collection.menuItemLimit)),n.current.filteredItems=o;var r=n.menu.querySelector("ul");if(n.range.positionMenuAtCaret(e),!o.length){var a=new CustomEvent("tribute-no-match",{detail:n.menu});return n.current.element.dispatchEvent(a),void("function"==typeof n.current.collection.noMatchTemplate&&!n.current.collection.noMatchTemplate()||!n.current.collection.noMatchTemplate?n.hideMenu():"function"==typeof n.current.collection.noMatchTemplate?r.innerHTML=n.current.collection.noMatchTemplate():r.innerHTML=n.current.collection.noMatchTemplate)}r.innerHTML="";var l=n.range.getDocument().createDocumentFragment();o.forEach((function(t,e){var o=n.range.getDocument().createElement("li");o.setAttribute("data-index",e),o.className=n.current.collection.itemClass,o.addEventListener("mousemove",(function(t){var e=i(n._findLiTarget(t.target),2),o=(e[0],e[1]);0!==t.movementY&&n.events.setActiveLi(o)})),n.menuSelected===e&&o.classList.add(n.current.collection.selectClass),o.innerHTML=n.current.collection.menuItemTemplate(t),l.appendChild(o)})),r.appendChild(l)}};"function"==typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,o):o(this.current.collection.values)}}},{key:"_findLiTarget",value:function(t){if(!t)return[];var e=t.getAttribute("data-index");return e?[t,e]:this._findLiTarget(t.parentNode)}},{key:"showMenuForCollection",value:function(t,e){t!==document.activeElement&&this.placeCaretAtEnd(t),this.current.collection=this.collection[e||0],this.current.externalTrigger=!0,this.current.element=t,t.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(t,this.current.collection.trigger),this.showMenuFor(t)}},{key:"placeCaretAtEnd",value:function(t){if(t.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else if(void 0!==document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(t),i.collapse(!1),i.select()}}},{key:"insertTextAtCursor",value:function(t){var e,n;(n=(e=window.getSelection()).getRangeAt(0)).deleteContents();var i=document.createTextNode(t);n.insertNode(i),n.selectNodeContents(i),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}},{key:"insertAtCaret",value:function(t,e){var n=t.scrollTop,i=t.selectionStart,o=t.value.substring(0,i),r=t.value.substring(t.selectionEnd,t.value.length);t.value=o+e+r,i+=e.length,t.selectionStart=i,t.selectionEnd=i,t.focus(),t.scrollTop=n}},{key:"hideMenu",value:function(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}},{key:"selectItemAtIndex",value:function(t,e){if("number"==typeof(t=parseInt(t))&&!isNaN(t)){var n=this.current.filteredItems[t],i=this.current.collection.selectTemplate(n);null!==i&&this.replaceText(i,e,n)}}},{key:"replaceText",value:function(t,e,n){this.range.replaceTriggerText(t,!0,!0,e,n)}},{key:"_append",value:function(t,e,n){if("function"==typeof t.values)throw new Error("Unable to append to values, as it is a function.");t.values=n?e:t.values.concat(e)}},{key:"append",value:function(t,e,n){var i=parseInt(t);if("number"!=typeof i)throw new Error("please provide an index for the collection to update.");var o=this.collection[i];this._append(o,e,n)}},{key:"appendCurrent",value:function(t,e){if(!this.isActive)throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,t,e)}},{key:"detach",value:function(t){if(!t)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t.get()),t.constructor===NodeList||t.constructor===HTMLCollection||t.constructor===Array)for(var e=t.length,n=0;n<e;++n)this._detach(t[n]);else this._detach(t)}},{key:"_detach",value:function(t){var e=this;this.events.unbind(t),t.tributeMenu&&this.menuEvents.unbind(t.tributeMenu),setTimeout((function(){t.removeAttribute("data-tribute"),e.isActive=!1,t.tributeMenu&&t.tributeMenu.remove()}))}},{key:"isActive",get:function(){return this._isActive},set:function(t){if(this._isActive!=t&&(this._isActive=t,this.current.element)){var e=new CustomEvent("tribute-active-".concat(t));this.current.element.dispatchEvent(e)}}}],[{key:"defaultSelectTemplate",value:function(t){return void 0===t?"".concat(this.current.collection.trigger).concat(this.current.mentionText):this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+t.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+t.original[this.current.collection.fillAttr]}},{key:"defaultMenuItemTemplate",value:function(t){return t.string}},{key:"inputTypes",value:function(){return["TEXTAREA","INPUT"]}}]),e}()}()}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r.apply(this,arguments)}function a(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function l(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var s=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=l(/Edge/i),c=l(/firefox/i),d=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),h=l(/iP(ad|od|hone)/i),f=l(/chrome/i)&&l(/android/i),p={capture:!1,passive:!1};function v(t,e,n){t.addEventListener(e,n,!s&&p)}function g(t,e,n){t.removeEventListener(e,n,!s&&p)}function m(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function b(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function y(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&m(t,e):m(t,e))||i&&t===n)return t;if(t===n)break}while(t=b(t))}return null}var w,T=/\s+/g;function E(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(T," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(T," ")}}function S(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function C(t,e){var n="";if("string"==typeof t)n=t;else do{var i=S(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function k(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,r=i.length;if(n)for(;o<r;o++)n(i[o],o);return i}return[]}function x(){var t=document.scrollingElement;return t||document.documentElement}function D(t,e,n,i,o){if(t.getBoundingClientRect||t===window){var r,a,l,u,c,d,h;if(t!==window&&t.parentNode&&t!==x()?(a=(r=t.getBoundingClientRect()).top,l=r.left,u=r.bottom,c=r.right,d=r.height,h=r.width):(a=0,l=0,u=window.innerHeight,c=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!s))do{if(o&&o.getBoundingClientRect&&("none"!==S(o,"transform")||n&&"static"!==S(o,"position"))){var f=o.getBoundingClientRect();a-=f.top+parseInt(S(o,"border-top-width")),l-=f.left+parseInt(S(o,"border-left-width")),u=a+r.height,c=l+r.width;break}}while(o=o.parentNode);if(i&&t!==window){var p=C(o||t),v=p&&p.a,g=p&&p.d;p&&(u=(a/=g)+(d/=g),c=(l/=v)+(h/=v))}return{top:a,left:l,bottom:u,right:c,width:h,height:d}}}function M(t,e,n){for(var i=N(t,!0),o=D(t)[e];i;){var r=D(i)[n];if(!("top"===n||"left"===n?o>=r:o<=r))return i;if(i===x())break;i=N(i,!1)}return!1}function A(t,e,n,i){for(var o=0,r=0,a=t.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==Yt.ghost&&(i||a[r]!==Yt.dragged)&&y(a[r],n.draggable,t,!1)){if(o===e)return a[r];o++}r++}return null}function _(t,e){for(var n=t.lastElementChild;n&&(n===Yt.ghost||"none"===S(n,"display")||e&&!m(n,e));)n=n.previousElementSibling;return n||null}function I(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Yt.clone||e&&!m(t,e)||n++;return n}function O(t){var e=0,n=0,i=x();if(t)do{var o=C(t),r=o.a,a=o.d;e+=t.scrollLeft*r,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function N(t,e){if(!t||!t.getBoundingClientRect)return x();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=S(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return x();if(i||e)return n;i=!0}}}while(n=n.parentNode);return x()}function P(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function L(t,e){return function(){if(!w){var n=arguments,i=this;1===n.length?t.call(i,n[0]):t.apply(i,n),w=setTimeout((function(){w=void 0}),e)}}}function R(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Y(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var X="Sortable"+(new Date).getTime();function B(){var t,n=[];return{captureAnimationState:function(){(n=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==S(t,"display")&&t!==Yt.ghost){n.push({target:t,rect:D(t)});var i=e({},n[n.length-1].rect);if(t.thisAnimationDuration){var o=C(t,!0);o&&(i.top-=o.f,i.left-=o.e)}t.fromRect=i}}))},addAnimationState:function(t){n.push(t)},removeAnimationState:function(t){n.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(n,{target:t}),1)},animateAll:function(e){var i=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof e&&e());var o=!1,r=0;n.forEach((function(t){var e=0,n=t.target,a=n.fromRect,l=D(n),s=n.prevFromRect,u=n.prevToRect,c=t.rect,d=C(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&P(s,l)&&!P(a,l)&&(c.top-l.top)/(c.left-l.left)==(a.top-l.top)/(a.left-l.left)&&(e=function(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}(c,s,u,i.options)),P(l,a)||(n.prevFromRect=a,n.prevToRect=l,e||(e=i.options.animation),i.animate(n,c,l,e)),e&&(o=!0,r=Math.max(r,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),e),n.thisAnimationDuration=e)})),clearTimeout(t),o?t=setTimeout((function(){"function"==typeof e&&e()}),r):"function"==typeof e&&e(),n=[]},animate:function(t,e,n,i){if(i){S(t,"transition",""),S(t,"transform","");var o=C(this.el),r=o&&o.a,a=o&&o.d,l=(e.left-n.left)/(r||1),s=(e.top-n.top)/(a||1);t.animatingX=!!l,t.animatingY=!!s,S(t,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),S(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),S(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){S(t,"transition",""),S(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}}var H=[],W={initializeByDefault:!0},F={mount:function(t){for(var e in W)W.hasOwnProperty(e)&&!(e in t)&&(t[e]=W[e]);H.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),H.push(t)},pluginEvent:function(t,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var r=t+"Global";H.forEach((function(o){n[o.pluginName]&&(n[o.pluginName][r]&&n[o.pluginName][r](e({sortable:n},i)),n.options[o.pluginName]&&n[o.pluginName][t]&&n[o.pluginName][t](e({sortable:n},i)))}))},initializePlugins:function(t,e,n,i){for(var o in H.forEach((function(i){var o=i.pluginName;if(t.options[o]||i.initializeByDefault){var a=new i(t,e,t.options);a.sortable=t,a.options=t.options,t[o]=a,r(n,a.defaults)}})),t.options)if(t.options.hasOwnProperty(o)){var a=this.modifyOption(t,o,t.options[o]);void 0!==a&&(t.options[o]=a)}},getEventProperties:function(t,e){var n={};return H.forEach((function(i){"function"==typeof i.eventProperties&&r(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,n){var i;return H.forEach((function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[e]&&(i=o.optionListeners[e].call(t[o.pluginName],n))})),i}};function j(t){var n=t.sortable,i=t.rootEl,o=t.name,r=t.targetEl,a=t.cloneEl,l=t.toEl,c=t.fromEl,d=t.oldIndex,h=t.newIndex,f=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,g=t.putSortable,m=t.extraEventProperties;if(n=n||i&&i[X]){var b,y=n.options,w="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||s||u?(b=document.createEvent("Event")).initEvent(o,!0,!0):b=new CustomEvent(o,{bubbles:!0,cancelable:!0}),b.to=l||i,b.from=c||i,b.item=r||i,b.clone=a,b.oldIndex=d,b.newIndex=h,b.oldDraggableIndex=f,b.newDraggableIndex=p,b.originalEvent=v,b.pullMode=g?g.lastPutMode:void 0;var T=e(e({},m),F.getEventProperties(o,n));for(var E in T)b[E]=T[E];i&&i.dispatchEvent(b),y[w]&&y[w].call(n,b)}}var z=["evt"],q=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.evt,r=a(i,z);F.pluginEvent.bind(Yt)(t,n,e({dragEl:K,parentEl:G,ghostEl:V,rootEl:Q,nextEl:Z,lastDownEl:J,cloneEl:tt,cloneHidden:et,dragStarted:pt,putSortable:lt,activeSortable:Yt.active,originalEvent:o,oldIndex:nt,oldDraggableIndex:ot,newIndex:it,newDraggableIndex:rt,hideGhostForTarget:Pt,unhideGhostForTarget:Lt,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(t){U({sortable:n,name:t,originalEvent:o})}},r))};function U(t){j(e({putSortable:lt,cloneEl:tt,targetEl:K,rootEl:Q,oldIndex:nt,oldDraggableIndex:ot,newIndex:it,newDraggableIndex:rt},t))}var K,G,V,Q,Z,J,tt,et,nt,it,ot,rt,at,lt,st,ut,ct,dt,ht,ft,pt,vt,gt,mt,bt,yt=!1,wt=!1,Tt=[],Et=!1,St=!1,Ct=[],kt=!1,xt=[],Dt="undefined"!=typeof document,Mt=h,At=u||s?"cssFloat":"float",_t=Dt&&!f&&!h&&"draggable"in document.createElement("div"),It=function(){if(Dt){if(s)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Ot=function(t,e){var n=S(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=A(t,0,e),r=A(t,1,e),a=o&&S(o),l=r&&S(r),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+D(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+D(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!r||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=i&&"none"===n[At]||r&&"none"===n[At]&&s+u>i)?"vertical":"horizontal"},Nt=function(t){function e(t,n){return function(i,o,r,a){var l=i.options.group.name&&o.options.group.name&&i.options.group.name===o.options.group.name;if(null==t&&(n||l))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(i,o,r,a),n)(i,o,r,a);var s=(n?i:o).options.group.name;return!0===t||"string"==typeof t&&t===s||t.join&&t.indexOf(s)>-1}}var n={},o=t.group;o&&"object"==i(o)||(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n},Pt=function(){!It&&V&&S(V,"display","none")},Lt=function(){!It&&V&&S(V,"display","")};Dt&&!f&&document.addEventListener("click",(function(t){if(wt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),wt=!1,!1}),!0);var Rt=function(t){if(K){t=t.touches?t.touches[0]:t;var e=(o=t.clientX,r=t.clientY,Tt.some((function(t){var e=t[X].options.emptyInsertThreshold;if(e&&!_(t)){var n=D(t),i=o>=n.left-e&&o<=n.right+e,l=r>=n.top-e&&r<=n.bottom+e;return i&&l?a=t:void 0}})),a);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[X]._onDragOver(n)}}var o,r,a},$t=function(t){K&&K.parentNode[X]._isOutsideThisEl(t.target)};function Yt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=r({},e),t[X]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ot(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Yt.supportPointer&&"PointerEvent"in window&&!d,emptyInsertThreshold:5};for(var i in F.initializePlugins(this,t,n),n)!(i in e)&&(e[i]=n[i]);for(var o in Nt(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&_t,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?v(t,"pointerdown",this._onTapStart):(v(t,"mousedown",this._onTapStart),v(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(v(t,"dragover",this),v(t,"dragenter",this)),Tt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),r(this,B())}function Xt(t,e,n,i,o,r,a,l){var c,d,h=t[X],f=h.options.onMove;return!window.CustomEvent||s||u?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=e,c.from=t,c.dragged=n,c.draggedRect=i,c.related=o||e,c.relatedRect=r||D(e),c.willInsertAfter=l,c.originalEvent=a,t.dispatchEvent(c),f&&(d=f.call(h,c,a)),d}function Bt(t){t.draggable=!1}function Ht(){kt=!1}function Wt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Ft(t){return setTimeout(t,0)}function jt(t){return clearTimeout(t)}Yt.prototype={constructor:Yt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(vt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,K):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,o=i.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(a||t).target,s=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=i.filter;if(function(t){xt.length=0;var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var i=e[n];i.checked&&xt.push(i)}}(n),!K&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!d||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=y(l,i.draggable,n,!1))&&l.animated||J===l)){if(nt=I(l),ot=I(l,i.draggable),"function"==typeof u){if(u.call(this,t,l,this))return U({sortable:e,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),q("filter",e,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(u&&(u=u.split(",").some((function(i){if(i=y(s,i.trim(),n,!1))return U({sortable:e,rootEl:i,name:"filter",targetEl:l,fromEl:n,toEl:n}),q("filter",e,{evt:t}),!0}))))return void(o&&t.cancelable&&t.preventDefault());i.handle&&!y(s,i.handle,n,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,n){var i,o=this,r=o.el,a=o.options,l=r.ownerDocument;if(n&&!K&&n.parentNode===r){var d=D(n);if(Q=r,G=(K=n).parentNode,Z=K.nextSibling,J=n,at=a.group,Yt.dragged=K,st={target:K,clientX:(e||t).clientX,clientY:(e||t).clientY},ht=st.clientX-d.left,ft=st.clientY-d.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,K.style["will-change"]="all",i=function(){q("delayEnded",o,{evt:t}),Yt.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!c&&o.nativeDraggable&&(K.draggable=!0),o._triggerDragStart(t,e),U({sortable:o,name:"choose",originalEvent:t}),E(K,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){k(K,t.trim(),Bt)})),v(l,"dragover",Rt),v(l,"mousemove",Rt),v(l,"touchmove",Rt),v(l,"mouseup",o._onDrop),v(l,"touchend",o._onDrop),v(l,"touchcancel",o._onDrop),c&&this.nativeDraggable&&(this.options.touchStartThreshold=4,K.draggable=!0),q("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(u||s))i();else{if(Yt.eventCanceled)return void this._onDrop();v(l,"mouseup",o._disableDelayedDrag),v(l,"touchend",o._disableDelayedDrag),v(l,"touchcancel",o._disableDelayedDrag),v(l,"mousemove",o._delayedDragTouchMoveHandler),v(l,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&v(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){K&&Bt(K),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;g(t,"mouseup",this._disableDelayedDrag),g(t,"touchend",this._disableDelayedDrag),g(t,"touchcancel",this._disableDelayedDrag),g(t,"mousemove",this._delayedDragTouchMoveHandler),g(t,"touchmove",this._delayedDragTouchMoveHandler),g(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):v(document,e?"touchmove":"mousemove",this._onTouchMove):(v(K,"dragend",this),v(Q,"dragstart",this._onDragStart));try{document.selection?Ft((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(yt=!1,Q&&K){q("dragStarted",this,{evt:e}),this.nativeDraggable&&v(document,"dragover",$t);var n=this.options;!t&&E(K,n.dragClass,!1),E(K,n.ghostClass,!0),Yt.active=this,t&&this._appendGhost(),U({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(ut){this._lastX=ut.clientX,this._lastY=ut.clientY,Pt();for(var t=document.elementFromPoint(ut.clientX,ut.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(ut.clientX,ut.clientY))!==e;)e=t;if(K.parentNode[X]._isOutsideThisEl(t),e)do{if(e[X]){if(e[X]._onDragOver({clientX:ut.clientX,clientY:ut.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Lt()}},_onTouchMove:function(t){if(st){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,o=t.touches?t.touches[0]:t,r=V&&C(V,!0),a=V&&r&&r.a,l=V&&r&&r.d,s=Mt&&bt&&O(bt),u=(o.clientX-st.clientX+i.x)/(a||1)+(s?s[0]-Ct[0]:0)/(a||1),c=(o.clientY-st.clientY+i.y)/(l||1)+(s?s[1]-Ct[1]:0)/(l||1);if(!Yt.active&&!yt){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(V){r?(r.e+=u-(ct||0),r.f+=c-(dt||0)):r={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");S(V,"webkitTransform",d),S(V,"mozTransform",d),S(V,"msTransform",d),S(V,"transform",d),ct=u,dt=c,ut=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!V){var t=this.options.fallbackOnBody?document.body:Q,e=D(K,!0,Mt,!0,t),n=this.options;if(Mt){for(bt=t;"static"===S(bt,"position")&&"none"===S(bt,"transform")&&bt!==document;)bt=bt.parentNode;bt!==document.body&&bt!==document.documentElement?(bt===document&&(bt=x()),e.top+=bt.scrollTop,e.left+=bt.scrollLeft):bt=x(),Ct=O(bt)}E(V=K.cloneNode(!0),n.ghostClass,!1),E(V,n.fallbackClass,!0),E(V,n.dragClass,!0),S(V,"transition",""),S(V,"transform",""),S(V,"box-sizing","border-box"),S(V,"margin",0),S(V,"top",e.top),S(V,"left",e.left),S(V,"width",e.width),S(V,"height",e.height),S(V,"opacity","0.8"),S(V,"position",Mt?"absolute":"fixed"),S(V,"zIndex","100000"),S(V,"pointerEvents","none"),Yt.ghost=V,t.appendChild(V),S(V,"transform-origin",ht/parseInt(V.style.width)*100+"% "+ft/parseInt(V.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,o=n.options;q("dragStart",this,{evt:t}),Yt.eventCanceled?this._onDrop():(q("setupClone",this),Yt.eventCanceled||((tt=Y(K)).removeAttribute("id"),tt.draggable=!1,tt.style["will-change"]="",this._hideClone(),E(tt,this.options.chosenClass,!1),Yt.clone=tt),n.cloneId=Ft((function(){q("clone",n),Yt.eventCanceled||(n.options.removeCloneOnHide||Q.insertBefore(tt,K),n._hideClone(),U({sortable:n,name:"clone"}))})),!e&&E(K,o.dragClass,!0),e?(wt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(g(document,"mouseup",n._onDrop),g(document,"touchend",n._onDrop),g(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,K)),v(document,"drop",n),S(K,"transform","translateZ(0)")),yt=!0,n._dragStartId=Ft(n._dragStarted.bind(n,e,t)),v(document,"selectstart",n),pt=!0,d&&S(document.body,"user-select","none"))},_onDragOver:function(t){var n,i,o,r,a=this.el,l=t.target,s=this.options,u=s.group,c=Yt.active,d=at===u,h=s.sort,f=lt||c,p=this,v=!1;if(!kt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),l=y(l,s.draggable,a,!0),B("dragOver"),Yt.eventCanceled)return v;if(K.contains(t.target)||l.animated&&l.animatingX&&l.animatingY||p._ignoreWhileAnimating===l)return W(!1);if(wt=!1,c&&!s.disabled&&(d?h||(o=G!==Q):lt===this||(this.lastPutMode=at.checkPull(this,c,K,t))&&u.checkPut(this,c,K,t))){if(r="vertical"===this._getDirection(t,l),n=D(K),B("dragOverValid"),Yt.eventCanceled)return v;if(o)return G=Q,H(),this._hideClone(),B("revert"),Yt.eventCanceled||(Z?Q.insertBefore(K,Z):Q.appendChild(K)),W(!0);var g=_(a,s.draggable);if(!g||function(t,e,n){var i=D(_(n.el,n.options.draggable)),o=10;return e?t.clientX>i.right+o||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+o}(t,r,this)&&!g.animated){if(g===K)return W(!1);if(g&&a===t.target&&(l=g),l&&(i=D(l)),!1!==Xt(Q,a,K,n,l,i,t,!!l))return H(),g&&g.nextSibling?a.insertBefore(K,g.nextSibling):a.appendChild(K),G=a,F(),W(!0)}else if(g&&function(t,e,n){var i=D(A(n.el,0,n.options,!0)),o=10;return e?t.clientX<i.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<i.top-o||t.clientY<i.bottom&&t.clientX<i.left}(t,r,this)){var m=A(a,0,s,!0);if(m===K)return W(!1);if(i=D(l=m),!1!==Xt(Q,a,K,n,l,i,t,!1))return H(),a.insertBefore(K,m),G=a,F(),W(!0)}else if(l.parentNode===a){i=D(l);var b,w,T,C=K.parentNode!==a,k=!function(t,e,n){var i=n?t.left:t.top,o=n?t.right:t.bottom,r=n?t.width:t.height,a=n?e.left:e.top,l=n?e.right:e.bottom,s=n?e.width:e.height;return i===a||o===l||i+r/2===a+s/2}(K.animated&&K.toRect||n,l.animated&&l.toRect||i,r),x=r?"top":"left",O=M(l,"top","top")||M(K,"top","top"),N=O?O.scrollTop:void 0;if(vt!==l&&(w=i[x],Et=!1,St=!k&&s.invertSwap||C),b=function(t,e,n,i,o,r,a,l){var s=i?t.clientY:t.clientX,u=i?n.height:n.width,c=i?n.top:n.left,d=i?n.bottom:n.right,h=!1;if(!a)if(l&&mt<u*o){if(!Et&&(1===gt?s>c+u*r/2:s<d-u*r/2)&&(Et=!0),Et)h=!0;else if(1===gt?s<c+mt:s>d-mt)return-gt}else if(s>c+u*(1-o)/2&&s<d-u*(1-o)/2)return function(t){return I(K)<I(t)?1:-1}(e);if((h=h||a)&&(s<c+u*r/2||s>d-u*r/2))return s>c+u/2?1:-1;return 0}(t,l,i,r,k?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,St,vt===l),0!==b){var P=I(K);do{P-=b,T=G.children[P]}while(T&&("none"===S(T,"display")||T===V))}if(0===b||T===l)return W(!1);vt=l,gt=b;var L=l.nextElementSibling,$=!1,Y=Xt(Q,a,K,n,l,i,t,$=1===b);if(!1!==Y)return 1!==Y&&-1!==Y||($=1===Y),kt=!0,setTimeout(Ht,30),H(),$&&!L?a.appendChild(K):l.parentNode.insertBefore(K,$?L:l),O&&R(O,0,N-O.scrollTop),G=K.parentNode,void 0===w||St||(mt=Math.abs(w-D(l)[x])),F(),W(!0)}if(a.contains(K))return W(!1)}return!1}function B(s,u){q(s,p,e({evt:t,isOwner:d,axis:r?"vertical":"horizontal",revert:o,dragRect:n,targetRect:i,canSort:h,fromSortable:f,target:l,completed:W,onMove:function(e,i){return Xt(Q,a,K,n,e,D(e),t,i)},changed:F},u))}function H(){B("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function W(e){return B("dragOverCompleted",{insertion:e}),e&&(d?c._hideClone():c._showClone(p),p!==f&&(E(K,lt?lt.options.ghostClass:c.options.ghostClass,!1),E(K,s.ghostClass,!0)),lt!==p&&p!==Yt.active?lt=p:p===Yt.active&&lt&&(lt=null),f===p&&(p._ignoreWhileAnimating=l),p.animateAll((function(){B("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(l===K&&!K.animated||l===a&&!l.animated)&&(vt=null),s.dragoverBubble||t.rootEl||l===document||(K.parentNode[X]._isOutsideThisEl(t.target),!e&&Rt(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),v=!0}function F(){it=I(K),rt=I(K,s.draggable),U({sortable:p,name:"change",toEl:a,newIndex:it,newDraggableIndex:rt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){g(document,"mousemove",this._onTouchMove),g(document,"touchmove",this._onTouchMove),g(document,"pointermove",this._onTouchMove),g(document,"dragover",Rt),g(document,"mousemove",Rt),g(document,"touchmove",Rt)},_offUpEvents:function(){var t=this.el.ownerDocument;g(t,"mouseup",this._onDrop),g(t,"touchend",this._onDrop),g(t,"pointerup",this._onDrop),g(t,"touchcancel",this._onDrop),g(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;it=I(K),rt=I(K,n.draggable),q("drop",this,{evt:t}),G=K&&K.parentNode,it=I(K),rt=I(K,n.draggable),Yt.eventCanceled||(yt=!1,St=!1,Et=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),jt(this.cloneId),jt(this._dragStartId),this.nativeDraggable&&(g(document,"drop",this),g(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),d&&S(document.body,"user-select",""),S(K,"transform",""),t&&(pt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),V&&V.parentNode&&V.parentNode.removeChild(V),(Q===G||lt&&"clone"!==lt.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),K&&(this.nativeDraggable&&g(K,"dragend",this),Bt(K),K.style["will-change"]="",pt&&!yt&&E(K,lt?lt.options.ghostClass:this.options.ghostClass,!1),E(K,this.options.chosenClass,!1),U({sortable:this,name:"unchoose",toEl:G,newIndex:null,newDraggableIndex:null,originalEvent:t}),Q!==G?(it>=0&&(U({rootEl:G,name:"add",toEl:G,fromEl:Q,originalEvent:t}),U({sortable:this,name:"remove",toEl:G,originalEvent:t}),U({rootEl:G,name:"sort",toEl:G,fromEl:Q,originalEvent:t}),U({sortable:this,name:"sort",toEl:G,originalEvent:t})),lt&&lt.save()):it!==nt&&it>=0&&(U({sortable:this,name:"update",toEl:G,originalEvent:t}),U({sortable:this,name:"sort",toEl:G,originalEvent:t})),Yt.active&&(null!=it&&-1!==it||(it=nt,rt=ot),U({sortable:this,name:"end",toEl:G,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){q("nulling",this),Q=K=G=V=Z=tt=J=et=st=ut=pt=it=rt=nt=ot=vt=gt=lt=at=Yt.dragged=Yt.ghost=Yt.clone=Yt.active=null,xt.forEach((function(t){t.checked=!0})),xt.length=ct=dt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":K&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,o=n.length,r=this.options;i<o;i++)y(t=n[i],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||Wt(t));return e},sort:function(t,e){var n={},i=this.el;this.toArray().forEach((function(t,e){var o=i.children[e];y(o,this.options.draggable,i,!1)&&(n[t]=o)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return y(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=F.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&Nt(n)},destroy:function(){q("destroy",this);var t=this.el;t[X]=null,g(t,"mousedown",this._onTapStart),g(t,"touchstart",this._onTapStart),g(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(g(t,"dragover",this),g(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Tt.splice(Tt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!et){if(q("hideClone",this),Yt.eventCanceled)return;S(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),et=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(et){if(q("showClone",this),Yt.eventCanceled)return;K.parentNode!=Q||this.options.group.revertClone?Z?Q.insertBefore(tt,Z):Q.appendChild(tt):Q.insertBefore(tt,K),this.options.group.revertClone&&this.animate(K,tt),S(tt,"display",""),et=!1}}else this._hideClone()}},Dt&&v(document,"touchmove",(function(t){(Yt.active||yt)&&t.cancelable&&t.preventDefault()})),Yt.utils={on:v,off:g,css:S,find:k,is:function(t,e){return!!y(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:L,closest:y,toggleClass:E,clone:Y,index:I,nextTick:Ft,cancelNextTick:jt,detectDirection:Ot,getChild:A},Yt.get=function(t){return t[X]},Yt.mount=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n[0].constructor===Array&&(n=n[0]),n.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Yt.utils=e(e({},Yt.utils),t.utils)),F.mount(t)}))},Yt.create=function(t,e){return new Yt(t,e)},Yt.version="1.15.0";var zt,qt,Ut,Kt,Gt,Vt,Qt=[],Zt=!1;function Jt(){Qt.forEach((function(t){clearInterval(t.pid)})),Qt=[]}function te(){clearInterval(Vt)}var ee=L((function(t,e,n,i){if(e.scroll){var o,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,s=e.scrollSpeed,u=x(),c=!1;qt!==n&&(qt=n,Jt(),zt=e.scroll,o=e.scrollFn,!0===zt&&(zt=N(n,!0)));var d=0,h=zt;do{var f=h,p=D(f),v=p.top,g=p.bottom,m=p.left,b=p.right,y=p.width,w=p.height,T=void 0,E=void 0,C=f.scrollWidth,k=f.scrollHeight,M=S(f),A=f.scrollLeft,_=f.scrollTop;f===u?(T=y<C&&("auto"===M.overflowX||"scroll"===M.overflowX||"visible"===M.overflowX),E=w<k&&("auto"===M.overflowY||"scroll"===M.overflowY||"visible"===M.overflowY)):(T=y<C&&("auto"===M.overflowX||"scroll"===M.overflowX),E=w<k&&("auto"===M.overflowY||"scroll"===M.overflowY));var I=T&&(Math.abs(b-r)<=l&&A+y<C)-(Math.abs(m-r)<=l&&!!A),O=E&&(Math.abs(g-a)<=l&&_+w<k)-(Math.abs(v-a)<=l&&!!_);if(!Qt[d])for(var P=0;P<=d;P++)Qt[P]||(Qt[P]={});Qt[d].vx==I&&Qt[d].vy==O&&Qt[d].el===f||(Qt[d].el=f,Qt[d].vx=I,Qt[d].vy=O,clearInterval(Qt[d].pid),0==I&&0==O||(c=!0,Qt[d].pid=setInterval(function(){i&&0===this.layer&&Yt.active._onTouchMove(Gt);var e=Qt[this.layer].vy?Qt[this.layer].vy*s:0,n=Qt[this.layer].vx?Qt[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(Yt.dragged.parentNode[X],n,e,t,Gt,Qt[this.layer].el)||R(Qt[this.layer].el,n,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==u&&(h=N(h,!1)));Zt=c}}),30),ne=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var s=n||o;a();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(u.clientX,u.clientY);l(),s&&!s.el.contains(c)&&(r("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ie(){}function oe(){}ie.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=A(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:ne},r(ie,{pluginName:"revertOnSpill"}),oe.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:ne},r(oe,{pluginName:"removeOnSpill"});Yt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):e.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):(g(document,"pointermove",this._handleFallbackAutoScroll),g(document,"touchmove",this._handleFallbackAutoScroll),g(document,"mousemove",this._handleFallbackAutoScroll)),te(),Jt(),clearTimeout(w),w=void 0},nulling:function(){Gt=qt=zt=Zt=Vt=Ut=Kt=null,Qt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(i,o);if(Gt=t,e||this.options.forceAutoScrollFallback||u||s||d){ee(t,this.options,r,e);var a=N(r,!0);!Zt||Vt&&i===Ut&&o===Kt||(Vt&&te(),Vt=setInterval((function(){var r=N(document.elementFromPoint(i,o),!0);r!==a&&(a=r,Jt()),ee(t,n.options,r,e)}),10),Ut=i,Kt=o)}else{if(!this.options.bubbleScroll||N(r,!0)===x())return void Jt();ee(t,this.options,N(r,!1),!1)}}},r(t,{pluginName:"scroll",initializeByDefault:!0})}),Yt.mount(oe,ie);const re=Yt;var ae=n(9351),le=n.n(ae);function se(){var t,e,n=".kanka-mentions";0!==(e=$(n)).length&&(t=e.first().data("remote"),new(le())({values:function(e,n){!function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var t=JSON.parse(i.responseText);n(t)}else 403===i.status&&n([])};var o=t+"?q="+e;i.open("GET",o,!0),i.send()}(e,(function(t){return n(t)}))},lookup:"name",menuShowMinLength:3,selectTemplate:function(t){return"["+t.original.model_type+":"+t.original.id+"]"},noMatchTemplate:function(){return null}}).attach(document.querySelectorAll(n)))}var ue,ce,de,he=-1e3,fe=!1;function pe(){var t=document.querySelector(".entity-attributes");re.create(t,{handle:".input-group-addon"}),$.each($(".attribute_delete"),(function(){$(this).unbind("click"),$(this).on("click",(function(){$(this).parent().parent().parent().remove(),ue&&ue.hide()}))})),$('[data-toggle="private"]').unbind("click").click((function(){$(this).hasClass("fa-lock")?($(this).removeClass("fa-lock").addClass("fa-unlock-alt").prop("title",$(this).data("public")),$(this).prev("input:hidden").val("0")):($(this).removeClass("fa-unlock-alt").addClass("fa-lock").prop("title",$(this).data("private")),$(this).prev("input:hidden").val("1"))})),$('[data-toggle="star"]').unbind("click").click((function(){$(this).hasClass("fa-regular")?($(this).removeClass("fa-regular").addClass("fa-solid").prop("title",$(this).data("entry")),$(this).prev("input:hidden").val("1")):($(this).removeClass("fa-solid").addClass("fa-regular").prop("title",$(this).data("tab")),$(this).prev("input:hidden").val("0"))}))}$(document).ready((function(){if(function(){var t=$('[name="live-attribute-config"]');if(0===t.length)return;ce=t.data("live"),de=$("#live-attribute-modal");var e=1;$.each($(".live-edit"),(function(){$(this).addClass("live-edit-parsed"),$(this).attr("data-uid",e),e++})),$(".live-edit-parsed").unbind("click").click((function(){var t=$(this).data("id");$(this).data("uid");var e=ce+"?id="+t+"&uid="+$(this).data("uid");$.ajax({url:e}).done((function(t){var e={};de.find(".modal-content").html(t),de.modal(e),de.find("form").submit((function(t){return t.preventDefault(),$.ajax({method:"POST",context:this,url:$(this).attr("action"),data:$(this).serialize()}).done((function(t){de.find(".modal-content").html(""),de.modal("hide");var e=$('[data-uid="'+t.uid+'"]');e.html(t.value),t.value?e.removeClass("empty-value"):e.addClass("empty-value"),window.showToast(t.success)})).fail((function(t){console.error("live-edit-error",t),de.find(".modal-content").html(""),de.modal("hide")})),!1}))}))}))}(),0!==$("#add_attribute_target").length){var t;t=$("#add_attribute_target"),pe(),$(".add_attribute").click((function(e){if(e.preventDefault(),!1!==fe){if($("form :input").length+4>fe)return void ue.show();ue.hide()}he-=1;var n=$($(this).data("template")).clone().removeClass("hidden").removeAttr("id"),i=n.html().replace(/\$TMP_ID\$/g,he);return n.html(i).insertBefore(t),pe(),se(),!1})),$("#attributes-delete-all-confirm-submit").click((function(t){return t.preventDefault(),$(this).siblings('input[name="delete-all-attributes"]').val(1),$("#entity-attributes-all .attribute_delete").click(),$("#attributes-delete-all-confirm").modal("hide"),ue&&ue.hide(),!1})),$.each($('[data-toggle="private"]'),(function(){$(this).hasClass("fa-lock")?$(this).prop("title",$(this).data("private")):$(this).prop("title",$(this).data("public"))}));var e=$("[data-max-fields]");1===e.length&&(fe=e.data("max-fields"),ue=$(".alert-too-many-fields"))}}))})()})();
//# sourceMappingURL=attributes.js.map